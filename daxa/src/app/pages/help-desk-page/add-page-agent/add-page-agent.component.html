<!-- src/app/pages/help-desk-page/add-page-agent/add-page-agent.component.html -->

<!-- Breadcrumb -->
<div class="breadcrumb-card mb-25 d-md-flex align-items-center justify-content-between">
    <h5 class="mb-0">
        Add User
    </h5>
    <ol class="breadcrumb list-unstyled mt-0 mb-0 pl-0">
        <li class="breadcrumb-item position-relative">
            <a routerLink="/" class="d-inline-block position-relative">
                <i class="ri-home-8-line"></i>
                Help Desk
            </a>
        </li>
        <li class="breadcrumb-item position-relative">
            Agents
        </li>
        <li class="breadcrumb-item position-relative">
            Add Agent
        </li>
    </ol>
</div>

<!-- Add User -->
<div class="row">
    <div class="col-xxl-12 col-xxxl-12">
        <mat-card
            class="daxa-card add-user-card mb-25 border-radius bg-white border-none d-block"
            [class.rtl-enabled]="themeService.isRTLEnabled()"
        >
            <mat-card-header>
                <mat-card-title>
                    <h5 class="mb-0">
                        Add User
                    </h5>
                </mat-card-title>
            </mat-card-header>
            <mat-card-content>
                <form [formGroup]="userForm" (ngSubmit)="onSubmit()">
                    <div class="row">
                        <div class="col-sm-6">
                            <div class="mb-25">
                                <label class="main-label d-block lh-1 text-black">
                                    User Name
                                </label>
                                <mat-form-field appearance="fill" class="w-100">
                                    <mat-label>
                                        User name
                                    </mat-label>
                                    <input matInput formControlName="name" required>
                                    <mat-error *ngIf="userForm.get('name')?.hasError('required')">
                                        Nome é obrigatório
                                    </mat-error>
                                </mat-form-field>
                            </div>
                        </div>
                        <div class="col-sm-6">
                            <div class="mb-25">
                                <label class="main-label d-block lh-1 text-black">
                                    Email Address
                                </label>
                                <mat-form-field appearance="fill" class="w-100">
                                    <mat-label>
                                        Email address
                                    </mat-label>
                                    <input matInput formControlName="email" type="email" required>
                                    <mat-error *ngIf="userForm.get('email')?.hasError('required')">
                                        Email é obrigatório
                                    </mat-error>
                                    <mat-error *ngIf="userForm.get('email')?.hasError('email')">
                                        Email inválido
                                    </mat-error>
                                </mat-form-field>
                            </div>
                        </div>
                        <div class="col-sm-6">
                            <div class="mb-25">
                                <label class="main-label d-block lh-1 text-black">
                                    Phone No
                                </label>
                                <mat-form-field appearance="fill" class="w-100">
                                    <mat-label>
                                        Phone no
                                    </mat-label>
                                    <input matInput formControlName="phoneNumber" required>
                                    <mat-error *ngIf="userForm.get('phoneNumber')?.hasError('required')">
                                        Telefone é obrigatório
                                    </mat-error>
                                </mat-form-field>
                            </div>
                        </div>

                        <!-- Data de admissão -->
                        <div class="col-sm-6">
                            <div class="mb-25">
                                <label class="main-label d-block lh-1 text-black">
                                    Data de admissão
                                </label>
                                <mat-form-field appearance="fill" class="w-100">
                                    <mat-label>
                                        Data de admissão
                                    </mat-label>
                                    <input matInput [matDatepicker]="admissionDatePicker" formControlName="admissionDate" required>
                                    <mat-datepicker-toggle matSuffix [for]="admissionDatePicker"></mat-datepicker-toggle>
                                    <mat-datepicker #admissionDatePicker></mat-datepicker>
                                    <mat-error *ngIf="userForm.get('admissionDate')?.hasError('required')">
                                        Data de admissão é obrigatória
                                    </mat-error>
                                </mat-form-field>
                            </div>
                        </div>

                        <div class="col-sm-12">
                            <div class="mb-25">
                                <label class="main-label d-block lh-1 text-black">
                                    Add Some Info
                                </label>
                                <mat-form-field class="textarea w-100" appearance="fill">
                                    <mat-label>
                                        Write your description
                                    </mat-label>
                                    <textarea matInput formControlName="desInfo" placeholder="E.g. It makes me feel..."></textarea>
                                    <mat-error *ngIf="userForm.get('desInfo')?.hasError('required')">
                                        Informação adicional é obrigatória
                                    </mat-error>
                                </mat-form-field>
                            </div>
                        </div>
                    </div>
                    <div class="btn-box d-flex justify-content-end">
                        <button mat-raised-button color="primary" type="submit" [disabled]="userForm.invalid">
                            Add User
                        </button>
                        <button mat-button type="button" (click)="userForm.reset()">
                            Cancel
                        </button>
                    </div>
                    <div *ngIf="isLoading" class="loading-spinner">
                        <mat-spinner diameter="30"></mat-spinner>
                    </div>
                    <!-- Mensagens de Feedback -->
                    <div *ngIf="successMessage" class="success-message mt-10">
                        {{ successMessage }}
                    </div>
                    <div *ngIf="errorMessage" class="error-message mt-10">
                        {{ errorMessage }}
                    </div>
                </form>
            </mat-card-content>
        </mat-card>
    </div>
</div>

